<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Finite Difference Computing with Exponential Decay Models">
<meta name="keywords" content="decay ODE,exponential decay,mesh,grid,mesh function,finite differences,forward difference,finite differences forward,difference equation,discrete equation,algebraic equation,finite difference scheme,Forward Euler scheme,backward difference,finite differences backward,backward scheme, 1-step,Backward Euler scheme,Crank-Nicolson scheme,centered difference,finite differences centered,averaging arithmetic,weighted average,theta-rule,$\theta$-rule,time step,finite difference operator notation,operator notation, finite differences,directory,folder,doc strings,printf format,format string syntax (Python),plotting curves,visualizing curves,representative (mesh function),array arithmetics,array computing,vectorization,continuous function norms,norm continuous,discrete function norms,mesh function norms,norm discrete (mesh function),error norms,scalar computing,PNG plot,PDF plot,EPS plot,viewing graphics files,cropping images,array arithmetics,array computing,vectorization,stability,amplification factor,A-stable methods,L-stable methods,interactive Python,error amplification factor,error global,consistency,stability,convergence,lambda functions,method of manufactured solutions,MMS (method of manufactured solutions),convergence rate,verification,implicit schemes,explicit schemes,theta-rule,$\theta$-rule,backward scheme, 2-step,BDF2 scheme,Leapfrog scheme,Leapfrog scheme, filtered,Heun's method,Runge-Kutta, 2nd-order method,Taylor-series methods (for ODEs),Adams-Bashforth scheme, 2nd-order,Adams-Bashforth scheme, 3rd order,Runge-Kutta, 4th-order method,RK4,adaptive time stepping,Dormand-Prince Runge-Kutta 4-5 method,population dynamics,logistic model,radioactive decay,chemical reactions irreversible,chemical reactions reversible,terminal velocity,geometric mean,averaging geometric,scaling,refactoring,importing modules,list comprehension,command-line arguments,option-value pairs (command line),command-line arguments,reading the command line,doctests,software testing doctests,unit testing,software testing nose,software testing pytest,test function,software testing test function,doctest in test function,unit testing,software testing unit testing (class-based),Distutils,GitHub,importing modules,problem class,solver class,wrapper (code),reproducibility,replicability,Unix wildcard notation,wildcard notation (Unix),Word (Microsoft),LibreOffice,OpenOffice,Google Docs,HTML,MathJax,LaTeX,Sphinx (typesetting tool),Markdown,IPython notebooks,Jupyter notebooks,DocOnce,replicability">

<title>Finite Difference Computing with Exponential Decay Models</title>

<!-- Bootstrap style: bootswatch_journal -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/journal/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }
</style>


</head>

<!-- tocinfo
{'highest level': 0,
 'sections': [('Preface', 0, 'ch:preface', 'ch:preface'),
              ('Acknowledgments', 3, None, '___sec1'),
              ('Algorithms and implementations', 0, None, '___sec2'),
              ('Finite difference methods',
               1,
               'decay:basics',
               'decay:basics'),
              ('A basic model for exponential decay',
               2,
               'decay:model',
               'decay:model'),
              ('The exact solution', 3, None, '___sec5'),
              ('A complete problem formulation', 3, None, '___sec6'),
              ('The Forward Euler scheme',
               2,
               'decay:schemes:FE',
               'decay:schemes:FE'),
              ('Step 1: Discretizing the domain', 3, None, '___sec8'),
              ('Step 2: Fulfilling the equation at discrete time points',
               3,
               None,
               '___sec9'),
              ('Step 3: Replacing derivatives by finite differences',
               3,
               None,
               '___sec10'),
              ('Step 4: Formulating a recursive algorithm',
               3,
               None,
               '___sec11'),
              ('Interpretation', 3, None, '___sec12'),
              ('Computing with the recursive formula', 3, None, '___sec13'),
              ('The Backward Euler scheme',
               2,
               'decay:schemes:BE',
               'decay:schemes:BE'),
              ('The Crank-Nicolson scheme',
               2,
               'decay:schemes:CN',
               'decay:schemes:CN'),
              ('The unifying $\\theta$-rule',
               2,
               'decay:schemes:theta',
               'decay:schemes:theta'),
              ('Constant time step', 2, None, '___sec17'),
              ('Mathematical derivation of finite difference formulas',
               2,
               'decay:fd:taylor',
               'decay:fd:taylor'),
              ('The forward difference', 3, None, '___sec19'),
              ('The backward difference', 3, None, '___sec20'),
              ('The centered difference', 3, None, '___sec21'),
              ('Compact operator notation for finite differences',
               2,
               'decay:fd:op',
               'decay:fd:op'),
              ('Implementation', 1, 'decay:impl1', 'decay:impl1'),
              ('Computer language: Python', 2, None, '___sec24'),
              ('Making a solver function', 2, 'decay:py1', 'decay:py1'),
              ('Integer division', 2, None, '___sec26'),
              ('Doc strings', 2, None, '___sec27'),
              ('Formatting numbers', 2, None, '___sec28'),
              ('Running the program', 2, None, '___sec29'),
              ('Plotting the solution', 2, None, '___sec30'),
              ('Verifying the implementation', 2, None, '___sec31'),
              ('Running a few algorithmic steps by hand',
               3,
               None,
               '___sec32'),
              ('Computing the numerical error as a mesh function',
               2,
               'decay:computing:error',
               'decay:computing:error'),
              ('Computing the norm of the error mesh function',
               2,
               'decay:computing:error:norm',
               'decay:computing:error:norm'),
              ('Scalar computing', 3, None, '___sec35'),
              ('Experiments with computing and plotting',
               2,
               None,
               '___sec36'),
              ('Combining plot files', 3, None, '___sec37'),
              ('Plotting with SciTools', 3, None, '___sec38'),
              ('Memory-saving implementation', 2, None, '___sec39'),
              ('Exercises', 1, None, '___sec40'),
              ('Exercise 1: Define a mesh function and visualize it',
               2,
               'decay:exer:meshfunc',
               'decay:exer:meshfunc'),
              ('Remarks', 3, None, '___sec42'),
              ('Exercise 2: Differentiate a function',
               2,
               'decay:exer:dudt',
               'decay:exer:dudt'),
              ('Exercise 3: Experiment with divisions',
               2,
               'decay:exer:intdiv',
               'decay:exer:intdiv'),
              ('Exercise 4: Experiment with wrong computations',
               2,
               'decay:exer:decay1err',
               'decay:exer:decay1err'),
              ('Exercise 5: Plot the error function',
               2,
               'decay:exer:plot:error',
               'decay:exer:plot:error'),
              ('Exercise 6: Change formatting of numbers and debug',
               2,
               'decay:exer:inexact:output',
               'decay:exer:inexact:output'),
              ('Analysis', 0, 'decay:analysis', 'decay:analysis'),
              ('Experimental investigations', 1, None, '___sec49'),
              ('Discouraging numerical solutions', 2, None, '___sec50'),
              ('Detailed experiments', 2, None, '___sec51'),
              ('Stability', 1, None, '___sec52'),
              ('Exact numerical solution', 2, None, '___sec53'),
              ('Stability properties derived from the amplification factor',
               2,
               None,
               '___sec54'),
              ('Accuracy', 1, None, '___sec55'),
              ('Visual comparison of amplification factors',
               2,
               None,
               '___sec56'),
              ('Series expansion of amplification factors',
               2,
               None,
               '___sec57'),
              ('The ratio of numerical and exact amplification factors',
               2,
               None,
               '___sec58'),
              ('The global error at a point',
               2,
               'decay:analysis:gobal:error',
               'decay:analysis:gobal:error'),
              ('Integrated error',
               2,
               'decay:analysis:gobal:error_int',
               'decay:analysis:gobal:error_int'),
              ('Truncation error',
               2,
               'decay:analysis:trunc',
               'decay:analysis:trunc'),
              ('Consistency, stability, and convergence',
               2,
               None,
               '___sec62'),
              ('Exercises', 1, None, '___sec63'),
              ('Exercise 7: Visualize the accuracy of finite differences',
               2,
               'decay:analysis:exer:fd:exp:plot',
               'decay:analysis:exer:fd:exp:plot'),
              ('Exercise 8: Explore the $\\theta$-rule for exponential growth',
               2,
               'decay:analysis:exer:growth',
               'decay:analysis:exer:growth'),
              ('Generalizations', 0, None, '___sec66'),
              ('Model extensions', 1, None, '___sec67'),
              ('Generalization: including a variable coefficient',
               2,
               None,
               '___sec68'),
              ('Generalization: including a source term',
               2,
               'decay:source',
               'decay:source'),
              ('Implementation of the generalized model problem',
               2,
               'decay:general',
               'decay:general'),
              ('Deriving the $\\theta$-rule formula', 3, None, '___sec71'),
              ('Python code', 3, None, '___sec72'),
              ('Coding of variable coefficients', 3, None, '___sec73'),
              ('Verifying a constant solution',
               2,
               'decay:verify:trivial',
               'decay:verify:trivial'),
              ('Verification via manufactured solutions',
               2,
               'decay:MMS',
               'decay:MMS'),
              ('Computing convergence rates',
               2,
               'decay:convergence:rate',
               'decay:convergence:rate'),
              ('Estimating $r$', 3, None, '___sec77'),
              ('Implementation', 3, None, '___sec78'),
              ('Extension to systems of ODEs', 2, None, '___sec79'),
              ('General first-order ODEs', 1, None, '___sec80'),
              ('Generic form of first-order ODEs', 2, None, '___sec81'),
              ('The $\\theta$-rule', 2, None, '___sec82'),
              ('An implicit 2-step backward scheme', 2, None, '___sec83'),
              ('Leapfrog schemes', 2, None, '___sec84'),
              ('The ordinary Leapfrog scheme', 3, None, '___sec85'),
              ('The filtered Leapfrog scheme', 3, None, '___sec86'),
              ('The 2nd-order Runge-Kutta method', 2, None, '___sec87'),
              ('A 2nd-order Taylor-series method', 2, None, '___sec88'),
              ('The 2nd- and 3rd-order Adams-Bashforth schemes',
               2,
               None,
               '___sec89'),
              ('The 4th-order Runge-Kutta method',
               2,
               'decay:fd2:RK4',
               'decay:fd2:RK4'),
              ('The Odespy software', 2, None, '___sec91'),
              ('Example: Runge-Kutta methods', 2, None, '___sec92'),
              ('Remark about using the $\\theta$-rule in Odespy',
               3,
               None,
               '___sec93'),
              ('Example: Adaptive Runge-Kutta methods',
               2,
               'decay:fd2:adaptiveRK',
               'decay:fd2:adaptiveRK'),
              ('Exercises', 1, None, '___sec95'),
              ('Exercise 9: Experiment with precision in tests and the size of $u$',
               2,
               'decay:fd2:exer:precision',
               'decay:fd2:exer:precision'),
              ('Exercise 10: Implement the 2-step backward scheme',
               2,
               'decay:fd2:exer:bw2',
               'decay:fd2:exer:bw2'),
              ('Exercise 11: Implement the 2nd-order Adams-Bashforth scheme',
               2,
               'decay:fd2:exer:AB2',
               'decay:fd2:exer:AB2'),
              ('Exercise 12: Implement the 3rd-order Adams-Bashforth scheme',
               2,
               'decay:fd2:exer:AB3',
               'decay:fd2:exer:AB3'),
              ('Exercise 13: Analyze explicit 2nd-order methods',
               2,
               'decay:exer:RK2:Taylor:analysis',
               'decay:exer:RK2:Taylor:analysis'),
              ('Project 14: Implement and investigate the Leapfrog scheme',
               2,
               'decay:fd2:exer:leapfrog1',
               'decay:fd2:exer:leapfrog1'),
              ('Problem 15: Make a unified implementation of many schemes',
               2,
               'decay:fd2:exer:uni',
               'decay:fd2:exer:uni'),
              ('Models', 0, 'decay:app', 'decay:app'),
              ('Scaling', 1, 'decay:app:scaling', 'decay:app:scaling'),
              ('Dimensionless variables', 2, None, '___sec105'),
              ('Dimensionless numbers', 2, None, '___sec106'),
              ('A scaling for vanishing initial condition',
               2,
               None,
               '___sec107'),
              ('Evolution of a population',
               1,
               'decay:app:pop',
               'decay:app:pop'),
              ('Exponential growth', 2, None, '___sec109'),
              ('Logistic growth', 2, None, '___sec110'),
              ('Compound interest and inflation',
               1,
               'decay:app:interest',
               'decay:app:interest'),
              ("Newton's law of cooling",
               1,
               'decay:app:Newton:cooling',
               'decay:app:Newton:cooling'),
              ('Radioactive decay',
               1,
               'decay:app:nuclear',
               'decay:app:nuclear'),
              ('Deterministic model', 2, None, '___sec114'),
              ('Stochastic model', 2, None, '___sec115'),
              ('Relation between stochastic and deterministic models',
               2,
               None,
               '___sec116'),
              ('Generalization of the radioactive decay modeling',
               2,
               'decay:app:waitingtime',
               'decay:app:waitingtime'),
              ('Chemical kinetics',
               1,
               'decay:app:kinetics',
               'decay:app:kinetics'),
              ('Irreversible reaction of two substances',
               2,
               None,
               '___sec119'),
              ('Reversible reaction of two substances', 2, None, '___sec120'),
              ('Irreversible reaction of two substances into a third',
               2,
               None,
               '___sec121'),
              ('A biochemical reaction', 2, None, '___sec122'),
              ('Spreading of diseases', 1, 'decay:app:SIR', 'decay:app:SIR'),
              ('Decay of atmospheric pressure with altitude',
               1,
               'decay:app:atm',
               'decay:app:atm'),
              ('The general model', 2, None, '___sec125'),
              ('Multiple atmospheric layers', 2, None, '___sec126'),
              ('Simplifications', 2, None, '___sec127'),
              ('Constant layer temperature', 3, None, '___sec128'),
              ('One-layer model', 3, None, '___sec129'),
              ('Compaction of sediments',
               1,
               'decay:app:sediment',
               'decay:app:sediment'),
              ('Vertical motion of a body in a viscous fluid',
               1,
               'decay:app:drag',
               'decay:app:drag'),
              ('Overview of forces', 2, None, '___sec132'),
              ('Equation of motion', 2, None, '___sec133'),
              ('Terminal velocity', 2, None, '___sec134'),
              ('A Crank-Nicolson scheme', 2, None, '___sec135'),
              ('Physical data', 2, None, '___sec136'),
              ('Verification', 2, None, '___sec137'),
              ('Scaling',
               2,
               'decay:app:drag:scaling',
               'decay:app:drag:scaling'),
              ('Decay ODEs from solving a PDE by Fourier expansions',
               1,
               'decay:app:diffusion:Fourier',
               'decay:app:diffusion:Fourier'),
              ('Exercises', 1, None, '___sec140'),
              ('Exercise 16: Radioactive decay of Carbon-14',
               2,
               'decay:app:exer:radio:C14',
               'decay:app:exer:radio:C14'),
              ("Exercise 17: Derive schemes for Newton's law of cooling",
               2,
               'decay:app:exer:cooling:schemes',
               'decay:app:exer:cooling:schemes'),
              ("Exercise 18: Implement schemes for Newton's law of cooling",
               2,
               'decay:app:exer:cooling:py',
               'decay:app:exer:cooling:py'),
              ('Bug 1: Wrong time level in the $T_s$ function',
               3,
               None,
               '___sec144'),
              ('Bug 2: Wrong time level in the $T$ function',
               3,
               None,
               '___sec145'),
              ('Bug 3: Missing $\\theta$ in a term', 3, None, '___sec146'),
              ('Bug 4: Missing `k` in the updating formula',
               3,
               None,
               '___sec147'),
              ('Bug 5: Using `1-theta` instead of `theta`',
               3,
               None,
               '___sec148'),
              ('Exercise 19: Find time of murder from body temperature',
               2,
               'decay:app:exer:cooling:murder',
               'decay:app:exer:cooling:murder'),
              ('Exercise 20: Simulate an oscillating cooling process',
               2,
               'decay:app:exer:cooling:osc',
               'decay:app:exer:cooling:osc'),
              ('Exercise 21: Simulate stochastic radioactive decay',
               2,
               'decay:app:exer:stoch:nuclear',
               'decay:app:exer:stoch:nuclear'),
              ('Exercise 22: Radioactive decay of two substances',
               2,
               'decay:app:exer:radio:twosubst',
               'decay:app:exer:radio:twosubst'),
              ('Exercise 23: Simulate a simple chemical reaction',
               2,
               'decay:app:exer:kinetics:AB',
               'decay:app:exer:kinetics:AB'),
              ('Exercise 24: Simulate an $n$-th order chemical reaction',
               2,
               'decay:app:exer:kinetics:ABn',
               'decay:app:exer:kinetics:ABn'),
              ('Exercise 25: Simulate spreading of a disease',
               2,
               'decay:app:exer:SIR',
               'decay:app:exer:SIR'),
              ('Exercise 26: Simulate a biochemical process',
               2,
               'decay:app:exer:MMK',
               'decay:app:exer:MMK'),
              ('Exercise 27: Simulate the pressure drop in the atmosphere',
               2,
               'decay:app:exer:atm1',
               'decay:app:exer:atm1'),
              ('Exercise 28: Make a program for vertical motion in a fluid',
               2,
               'decay:app:exer:drag:prog',
               'decay:app:exer:drag:prog'),
              ('Project 29: Simulate parachuting',
               2,
               'decay:app:exer:parachute',
               'decay:app:exer:parachute'),
              ('Exercise 30: Formulate vertical motion in the atmosphere',
               2,
               'decay:app:exer:drag:atm1',
               'decay:app:exer:drag:atm1'),
              ('Exercise 31: Simulate vertical motion in the atmosphere',
               2,
               'decay:app:exer:drag:atm2',
               'decay:app:exer:drag:atm2'),
              ('Exercise 32: Compute $y=|x|$ by solving an ODE',
               2,
               'decay:app:exer:signum',
               'decay:app:exer:signum'),
              ('Exercise 33: Simulate fortune growth with random interest rate',
               2,
               'decay:app:exer:interest',
               'decay:app:exer:interest'),
              ('Exercise 34: Simulate a population in a changing environment',
               2,
               'decay:app:exer:pop:at',
               'decay:app:exer:pop:at'),
              ('Exercise 35: Simulate logistic growth',
               2,
               'decay:app:exer:pop:logistic1',
               'decay:app:exer:pop:logistic1'),
              ('Exercise 36: Rederive the equation for continuous compound interest',
               2,
               'decay:app:exer:interest:derive',
               'decay:app:exer:interest:derive'),
              ('Scientific software engineering', 0, 'decay:se', 'decay:se'),
              ('Basic implementations',
               1,
               'softeng1:basic',
               'softeng1:basic'),
              ('Mathematical problem and solution technique',
               2,
               'softeng1:basic:math',
               'softeng1:basic:math'),
              ('A first, quick implementation',
               2,
               'softeng1:basic:impl1',
               'softeng1:basic:impl1'),
              ('A more decent program',
               2,
               'softeng1:basic:impl2',
               'softeng1:basic:impl2'),
              ('Comments in a program', 3, None, '___sec172'),
              ('Refactoring into functions', 3, None, '___sec173'),
              ('Program file vs IDE vs notebook', 3, None, '___sec174'),
              ('Prefixing imported functions by the module name',
               2,
               'softeng1:basic:modprefix',
               'softeng1:basic:modprefix'),
              ('Implementing the numerical algorithm in a function',
               2,
               'softeng1:basic:func',
               'softeng1:basic:func'),
              ('Do not have several versions of a code',
               2,
               None,
               '___sec177'),
              ('Making a module',
               2,
               'softeng1:basic:module',
               'softeng1:basic:module'),
              ('Example on extending the module code',
               2,
               'softeng1:basic:experiment2',
               'softeng1:basic:experiment2'),
              ('Documenting functions and modules',
               2,
               'softeng1:basic:docstring',
               'softeng1:basic:docstring'),
              ('User interfaces',
               1,
               'softeng1:basic:UI',
               'softeng1:basic:UI'),
              ('Command-line arguments', 2, None, '___sec182'),
              ('Positional command-line arguments', 2, None, '___sec183'),
              ('Option-value pairs on the command line',
               2,
               None,
               '___sec184'),
              ('Creating a graphical web user interface',
               2,
               None,
               '___sec185'),
              ('Making a compute function', 3, None, '___sec186'),
              ('Generating the user interface', 3, None, '___sec187'),
              ('Running the web application', 3, None, '___sec188'),
              ('Tests for verifying implementations', 1, None, '___sec189'),
              ('Doctests', 2, None, '___sec190'),
              ('Unit tests and test functions', 2, None, '___sec191'),
              ('Two Python test frameworks: nose and pytest',
               3,
               None,
               '___sec192'),
              ('Test function requirements', 3, None, '___sec193'),
              ('Comparison of real numbers', 3, None, '___sec194'),
              ('Special assert functions from nose', 3, None, '___sec195'),
              ('Locating test functions', 3, None, '___sec196'),
              ('Running tests', 3, None, '___sec197'),
              ('Embedding doctests in a test function', 3, None, '___sec198'),
              ('Installing nose and pytest', 3, None, '___sec199'),
              ('Test function for the solver', 2, None, '___sec200'),
              ('Test function for reading positional command-line arguments',
               2,
               None,
               '___sec201'),
              ('Test function for reading option-value pairs',
               2,
               None,
               '___sec202'),
              ('Classical class-based unit testing',
               2,
               'softeng1:basic:unittest',
               'softeng1:basic:unittest'),
              ('Sharing the software with other users',
               1,
               'softeng1:prog:se:git',
               'softeng1:prog:se:git'),
              ('Organizing the software directory tree',
               2,
               None,
               '___sec205'),
              ('Distributing just a module file', 3, None, '___sec206'),
              ('Distributing a package', 3, None, '___sec207'),
              ('Publishing the software at GitHub', 2, None, '___sec208'),
              ('Downloading and installing the software',
               2,
               None,
               '___sec209'),
              ('Installing just a module file', 3, None, '___sec210'),
              ('Installing a package', 3, None, '___sec211'),
              ('Classes for problem and solution method',
               1,
               'softeng1:prog:se:class',
               'softeng1:prog:se:class'),
              ('The problem class', 2, None, '___sec213'),
              ('The solver class', 2, None, '___sec214'),
              ('Combining the objects', 3, None, '___sec215'),
              ('Improving the problem and solver classes',
               2,
               'softeng1:prog:se:class2',
               'softeng1:prog:se:class2'),
              ('A generic class for parameters', 3, None, '___sec217'),
              ('Automating scientific experiments',
               1,
               'softeng1:experiments',
               'softeng1:experiments'),
              ('Available software', 2, None, '___sec219'),
              ('The results we want to produce', 2, None, '___sec220'),
              ('Combining plot files', 2, None, '___sec221'),
              ('Running a program from Python', 2, None, '___sec222'),
              ('The automating script', 2, None, '___sec223'),
              ('Making a report',
               2,
               'softeng1:exper:report',
               'softeng1:exper:report'),
              ('Word, OpenOffice, GoogleDocs', 3, None, '___sec225'),
              ('HTML with MathJax', 3, None, '___sec226'),
              ('LaTeX', 3, None, '___sec227'),
              ('Sphinx', 3, None, '___sec228'),
              ('Markdown', 3, None, '___sec229'),
              ('IPython/Jupyter notebooks', 3, None, '___sec230'),
              ('Wiki formats', 3, None, '___sec231'),
              ('DocOnce', 3, None, '___sec232'),
              ('Publishing a complete project',
               2,
               'softeng1:exper:github',
               'softeng1:exper:github'),
              ('Exercises', 1, None, '___sec234'),
              ('Problem 37: Make a tool for differentiating curves',
               2,
               'softeng1:exer:derivative',
               'softeng1:exer:derivative'),
              ('Problem 38: Make solid software for the Trapezoidal rule',
               2,
               'softeng1:exer:integral:flat',
               'softeng1:exer:integral:flat'),
              ('Problem 39: Implement classes for the Trapezoidal rule',
               2,
               'softeng1:exer:integral:flat2',
               'softeng1:exer:integral:flat2'),
              ('Problem 40: Write a doctest and a test function',
               2,
               'softeng1:exer:doctest1',
               'softeng1:exer:doctest1'),
              ('Problem 41: Experiment with tolerances in comparisons',
               2,
               'softeng1:exer:tol',
               'softeng1:exer:tol'),
              ('Remarks', 3, None, '___sec240'),
              ('Exercise 42: Make use of a class implementation',
               2,
               'softeng1:exer:class:dts',
               'softeng1:exer:class:dts'),
              ('Exercise 43: Make solid software for a difference equation',
               2,
               'softeng1:exer:logistic',
               'softeng1:exer:logistic'),
              ('References', 1, None, '___sec243')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="decay-book.html">Finite Difference Computing with Exponential Decay Models</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._decay-book001.html#ch:preface" style="font-size: 80%;">Preface</a></li>
     <!-- navigation toc: --> <li><a href="._decay-book002.html#___sec2" style="font-size: 80%;">Algorithms and implementations</a></li>
     <!-- navigation toc: --> <li><a href="._decay-book005.html#decay:analysis" style="font-size: 80%;">Analysis</a></li>
     <!-- navigation toc: --> <li><a href="._decay-book006.html#___sec66" style="font-size: 80%;">Generalizations</a></li>
     <!-- navigation toc: --> <li><a href="._decay-book007.html#decay:app" style="font-size: 80%;">Models</a></li>
     <!-- navigation toc: --> <li><a href="._decay-book008.html#decay:se" style="font-size: 80%;">Scientific software engineering</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0012"></a>
<!-- !split -->

<h1 id="softeng1:prog:se:git">Sharing the software with other users</h1>

<p>
As soon as you have some working software that you intend to share
with others, you should package your software in a standard way such
that users can easily download your software, install it, improve it,
and ask you to approve their improvements in new versions of the software.
During recent years, the software development community has established
quite firm tools and rules for how all this is done. The following
subsections cover three steps in sharing software:

<ol>
<li> Organizing the software for public distribution.</li>
<li> Uploading the software to a cloud service (here GitHub).</li>
<li> Downloading and installing the software.</li>
</ol>

<h2 id="___sec205">Organizing the software directory tree </h2>

<p>
We start with organizing our software as a directory tree. Our
software consists of one module file, <code>decay.py</code>, and possibly some
unit tests in a separate file located in a directory <code>tests</code>.

<p>
The <code>decay.py</code> can be used as a module or as a program. For distribution
to other users who install the program <code>decay.py</code> in system directories,
we need to insert the following line at the top of the file:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic">#!/usr/bin/env python</span>
</pre></div>
<p>
This line makes it possible to write just the filename and get the
file executed by the <code>python</code> program (or more precisely, the first
<code>python</code> program found in the directories in the <code>PATH</code> environment
variable).

<h3 id="___sec206">Distributing just a module file </h3>

<p>
Let us start out with the minimum solution alternative: distributing
just the <code>decay.py</code> file. Then the software is just one file and all
we need is a directory with this file.  Users will also this directory
to contain an installation script <code>setup.py</code> and a <code>README</code> file
telling what the software is about, the author's email address, a URL
for downloading the software, and other useful information.

<p>
The <code>setup.py</code> file can be as short as

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">distutils.core</span> <span style="color: #008000; font-weight: bold">import</span> setup
setup(name<span style="color: #666666">=</span><span style="color: #BA2121">&#39;decay&#39;</span>,
      version<span style="color: #666666">=</span><span style="color: #BA2121">&#39;0.1&#39;</span>,
      py_modules<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;decay&#39;</span>],
      scripts<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;decay.py&#39;</span>],
      )
</pre></div>
<p>
The <code>py_modules</code> argument specifies a list of modules to be installed, while
<code>scripts</code> specifies stand-alone programs. Our <code>decay.py</code> can be used
either as a module or as an executable program, so we want users to
have both possibilities.

<h3 id="___sec207">Distributing a package </h3>

<p>
If the software consists of more files than one or two modules, one
should make a Python <em>package</em> out of it. In our case we make a
package <code>decay</code> containing one module, also called <code>decay</code>.

<p>
To make a package <code>decay</code>, create a directory <code>decay</code> and an empty
file in it with name <code>__init__.py</code>.
A <code>setup.py</code> script must now specify the directory name of the package
and also an executable program (<code>scripts=</code>)
in case we want to run <code>decay.py</code> as a stand-alone application:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">distutils.core</span> <span style="color: #008000; font-weight: bold">import</span> setup
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">os</span>

setup(name<span style="color: #666666">=</span><span style="color: #BA2121">&#39;decay&#39;</span>,
      version<span style="color: #666666">=</span><span style="color: #BA2121">&#39;0.1&#39;</span>,
      author<span style="color: #666666">=</span><span style="color: #BA2121">&#39;Hans Petter Langtangen&#39;</span>,
      author_email<span style="color: #666666">=</span><span style="color: #BA2121">&#39;hpl@simula.no&#39;</span>,
      url<span style="color: #666666">=</span><span style="color: #BA2121">&#39;https://github.com/hplgit/decay-package/&#39;</span>,
      packages<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;decay&#39;</span>],
      scripts<span style="color: #666666">=</span>[os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span style="color: #BA2121">&#39;decay&#39;</span>, <span style="color: #BA2121">&#39;decay.py&#39;</span>)]
     )
</pre></div>
<p>
We have also added some author and download information.
The reader is referred to the <a href="https://docs.python.org/2/distutils/setupscript.html" target="_self">Distutils documentation</a> for more information on how to
write <code>setup.py</code> scripts.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Remark about the executable file.</b>
The executable program, <code>decay.py</code>, is above taken to be the complete
module file <code>decay.py</code>. It would normally be preferred to instead
write a very short script essentially importing <code>decay</code> and running
the test block in <code>decay.py</code>.  In this way, we distribute a module and
a very short file, say <code>decay-main.py</code>, as an executable program:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic">#!/usr/bin/env python</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">decay</span>
decay<span style="color: #666666">.</span>decay<span style="color: #666666">.</span>experiment_compare_dt(<span style="color: #008000">True</span>)
decay<span style="color: #666666">.</span>decay<span style="color: #666666">.</span>plt<span style="color: #666666">.</span>show()
</pre></div>
<p>
</div>


<p>
In this package example, we move the unit tests out of the <code>decay.py</code>
module to a separate file, <code>test_decay.py</code>, and place this file in a
directory <code>tests</code>. Then the <code>nosetests</code> and <code>py.test</code> programs will
automatically find and execute the tests.

<p>
The complete directory structure reads

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; /bin/ls -R
.:
decay  README  setup.py

./decay:
decay.py  __init__.py  tests

./decay/tests:
test_decay.py
</pre></div>

<h2 id="___sec208">Publishing the software at GitHub </h2>

<p>
The leading site today for publishing open source software projects is
GitHub at <a href="http://github.com" target="_self"><tt>http://github.com</tt></a>, provided you want your software to
be open to the world. With a paid GitHub account, you can have private
projects too.

<p>
Sign up for a GitHub account if you do not already have one.
Go to your account settings and provide an SSH key (typically
the file <code>~/.ssh/id_rsa.pub</code>) such that
you can communicate with GitHub without being prompted for your password.
All communication between your computer and GitHub goes via the version
control system Git. This may at first sight look tedious, but
this is the way professionals work with software today. With Git you
have full control of the history of your files, i.e., &quot;who did what when&quot;.
The technology makes Git superior to simpler alternatives
like Dropbox and Google Drive,
especially when you collaborate with others.
There is a reason why Git has gained the position it has,
and there is no reason why you should not adopt this tool.

<p>
To create a new project, click on <em>New repository</em> on the main page and
fill out a project name. Click on the check button <em>Initialize this
repository with a README</em>, and click on <em>Create repository</em>. The next
step is to clone (copy) the GitHub repo (short for repository) to
your own computer(s) and fill it with files. The typical clone command is

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; git clone git://github.com:username/projname.git
</pre></div>
<p>
where <code>username</code> is your GitHub username and <code>projname</code> is the
name of the repo (project). The result of <code>git clone</code> is a
directory <code>projname</code>. Go to this directory and add files.
As soon as the repo directory is populated with files, run

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; git add .
Terminal&gt; git commit -am &#39;First registration of project files&#39;
Terminal&gt; git push origin master
</pre></div>
<p>
The above <code>git</code> commands look cryptic, but these commands plus
2-3 more are the essence of what you need in your daily work with
files in small or big
software projects. I strongly encourage you to
learn more about <a href="http://hplgit.github.io/teamods/bitgit/html/" target="_self">version control systems and project hosting
sites</a>
<a href="._decay-book016.html#Langtangen_bitgit">[11]</a>.

<p>
Your project files are now stored in the cloud at
<a href="https://github.com/username/projname" target="_self"><tt>https://github.com/username/projname</tt></a>. Anyone can
get the software by the listed <code>git clone</code> command you used above,
or by clicking on the links for zip and tar files.

<p>
Every time you update the project files, you need to register
the update at GitHub by

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; git commit -am &#39;Description of the changes you made...&#39;
Terminal&gt; git push origin master
</pre></div>
<p>
The files at GitHub are now synchronized with your local ones.
Similarly, every time you start working on files in this project,
make sure you have the latest version:
<code>git pull origin master</code>.

<p>
You are recommended to read <a href="http://hplgit.github.io/teamods/bitgit/html/" target="_self">a quick intro</a> that makes you
up and going with this style of
professional work. And you should put all your writings and programming
projects in repositories in the cloud!

<h2 id="___sec209">Downloading and installing the software </h2>

<p>
Users of your software go to the Git repo at <code>github.com</code> and
clone the repository. One can use either SSH or HTTP for communication.
Most users will use the latter, typically

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; git clone https://github.com/username/projname.git
</pre></div>
<p>
The result is a directory <code>projname</code> with the files in the repo.

<h3 id="___sec210">Installing just a module file </h3>

<p>
The software package is in the case above a directory <code>decay</code> with three files

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; ls decay
README   decay.py   setup.py
</pre></div>
<p>
To install the <code>decay.py</code> file, a user
just runs <code>setup.py</code>:

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; sudo python setup.py install
</pre></div>
<p>
This command will install the software in system directories, so the user
needs to run the command as <code>root</code> on Unix systems (therefore the command
starts with <code>sudo</code>).
The user can now import the module by <code>import decay</code> and run
the program by

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; decay.py
</pre></div>
<p>
A user can easily install the software on her personal account if
a system-wide installation is not desirable. We refer to the
<a href="https://docs.python.org/2/install/index.html#alternate-installation" target="_self">installation documentation</a> for the many arguments that can be given to <code>setup.py</code>.
Note that if the software is installed on a personal account, the
<code>PATH</code> and <code>PYTHONPATH</code> environment variables must contain the
relevant directories.

<p>
Our <code>setup.py</code> file specifies a module <code>decay</code> to be installed as well
as a program <code>decay.py</code>.  Modules are typically installed in some <code>lib</code>
directory on the computer system, e.g.,
<code>/usr/local/lib/python2.7/dist-packages</code>, while executable programs go
to <code>/usr/local/bin</code>.

<h3 id="___sec211">Installing a package </h3>

<p>
When the software is organized as a Python package, the installation is
done by running <code>setup.py</code> exactly as explained above, but the use of a module
<code>decay</code> in a package <code>decay</code> requires the following syntax:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">import decay
u, t = decay.decay.solver(...)
</pre></div>
<p>
That is, the call goes like <code>packagename.modulename.functionname</code>.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Package import in <code>__init__.py</code>.</b>
One can ease the use of packages by providing a somewhat simpler
import like

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">import decay
u, t = decay.solver(...)

# or
from decay import solver
u, t = solver(...)
</pre></div>
<p>
This is accomplished by putting an import statement in the <code>__init__.py</code>
file, which is always run when doing the package import <code>import decay</code>
or <code>from decay import</code>. The <code>__init__.py</code> file must now contain

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">decay</span> <span style="color: #008000; font-weight: bold">import</span> <span style="color: #666666">*</span>
</pre></div>
<p>
Obviously, it is the package developer who decides on such an
<code>__init__.py</code> file or if it should just be empty.
</div>


<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._decay-book011.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._decay-book013.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

